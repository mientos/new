<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twój Teatr Bajek AI</title>
    <meta name="description" content="Stwórz i odsłuchaj unikalną, udźwiękowioną bajkę. Zaprojektowane, by wyciszać i inspirować.">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@500&family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div id="entry-overlay">
        <div class="curtain-left"></div>
        <div class="entry-content">
            <svg class="entry-icon"><use xlink:href="#icon-sparkle"></use></svg>
            <h1>Witaj w Teatrze Bajek</h1>
            <p>Miejsce, gdzie rodzą się opowieści.</p>
            <button id="enterBtn">Rozpocznij przygodę</button>
        </div>
        <div class="curtain-right"></div>
    </div>

    <svg width="0" height="0" style="position:absolute">
        <defs>
            <symbol id="icon-sparkle" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2.5l1.55 3.55L17.5 7.5l-3.55 1.55L12 12.5l-1.55-3.45L7 7.5l3.45-1.45L12 2.5zM6 10l-2 4.5l-4.5-2l4.5-2L6 6l2 4.5L12.5 10l-4.5 2zM18 14l-2-4.5l4.5 2l-4.5 2L18 18l-2-4.5l4.5-2z"/>
            </symbol>
            <symbol id="icon-dice" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m-4 14h-2v-2h2v2m0-4h-2v-2h2v2m0-4h-2V7h2v2m-4 8H9v-2h2v2m-4-4H7v-2h2v2m4-4h-2V7h2v2m4-4H9V7h2v2h2V7h2v2Z"/>
            </symbol>
            <symbol id="icon-volume-high" viewBox="0 0 24 24">
                <path fill="currentColor" d="M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM3 9v6h4l5 5V4L7 9H3z"/>
            </symbol>
            <symbol id="icon-music" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 3v10.55c-.59-.34-1.27-.55-2-.55c-2.21 0-4 1.79-4 4s1.79 4 4 4s4-1.79 4-4V7h4V3h-6z"/>
            </symbol>
        </defs>
    </svg>

    <audio id="backgroundMusicPlayer" loop></audio>

    <div class="container">
        <header>
            <h1>
                <svg class="header-icon"><use xlink:href="#icon-sparkle"></use></svg>
                <span>Twój Teatr Bajek</span>
            </h1>
            <p>Stwórz opowieść, która utuli do snu.</p>
        </header>

        <main>
            <div id="form-section">
                <div class="form-group">
                    <label for="childName">Imię Głównego Bohatera</label>
                    <input type="text" id="childName" placeholder="np. Zosia, Krzyś">
                </div>

                <div class="form-group">
                    <label for="motivationInput">Główna Motywacja Bohatera</label>
                    <div class="input-with-icon">
                        <input type="text" id="motivationInput" placeholder="Wpisz motywację lub wylosuj pomysł">
                        <button id="randomMotivationBtn" class="random-btn" title="Wylosuj pomysł">
                            <svg><use xlink:href="#icon-dice"></use></svg>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="realmInput">Kraina i jej Nastrój</label>
                    <div class="input-with-icon">
                        <input type="text" id="realmInput" placeholder="Wpisz krainę lub wylosuj pomysł">
                         <button id="randomRealmBtn" class="random-btn" title="Wylosuj pomysł">
                            <svg><use xlink:href="#icon-dice"></use></svg>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="guardianInput">Tajemniczy Strażnik i jego Rola</label>
                     <div class="input-with-icon">
                        <input type="text" id="guardianInput" placeholder="Wpisz strażnika lub wylosuj pomysł">
                         <button id="randomGuardianBtn" class="random-btn" title="Wylosuj pomysł">
                            <svg><use xlink:href="#icon-dice"></use></svg>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="storyStyle">Styl Opowieści</label>
                    <select id="storyStyle">
                        <option value="random" selected>Losowy (niespodzianka!)</option>
                        <option value="disney">W stylu Disneya</option>
                        <option value="andersen">W stylu Andersena</option>
                        <option value="grimm">W stylu Braci Grimm</option>
                        <option value="brzechwa_tuwim">W stylu Brzechwy/Tuwima</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="storyLength">Długość Opowieści</label>
                    <select id="storyLength">
                        <option value="krotka">Krótka (ok. 1-2 min czytania)</option>
                        <option value="srednia" selected>Średnia (ok. 3-4 min czytania)</option>
                        <option value="dluga">Długa (ok. 5-6 min czytania)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="ageCategory">Dla kogo jest bajka?</label>
                    <select id="ageCategory">
                        <option value="dla_malucha">Dla Malucha (3-5 lat)</option>
                        <option value="dla_starszaka" selected>Dla Starszaka (6-8 lat)</option>
                        <option value="dla_odkrywcy">Dla Odkrywcy (9-11 lat)</option>
                    </select>
                </div>
            </div>
        
            <button id="generateBtn">
                <span class="btn-text">Stwórz Moją Bajkę</span>
                <span class="spinner-container hidden"><div class="spinner"></div></span>
            </button>
        
            <div id="story-container" class="hidden">
                <div id="result">
                    <h2 id="storyTitle"></h2>
                    <div id="storyContent"></div>
                </div>
    
                <div id="audio-section">
                    <button id="readAloudBtn" class="audio-button">
                        <span class="btn-text">Odsłuchaj Opowieść</span>
                    </button>
                    <div id="volume-control-section">
                        <label for="voiceVolume">
                            <svg><use xlink:href="#icon-volume-high"></use></svg>
                        </label>
                        <input type="range" id="voiceVolume" class="volume-slider" min="0" max="1" step="0.05" value="1.0">
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <p>Zaprojektowane z Miłością</p>
            <div id="music-control-group">
                <button id="toggleMusicBtn" title="Włącz/wyłącz muzykę w tle" aria-label="Włącz lub wyłącz muzykę w tle">
                    <svg><use xlink:href="#icon-music"></use></svg>
                </button>
                <input type="range" id="musicVolume" class="volume-slider" min="0" max="0.3" step="0.01" value="0.1" title="Głośność muzyki w tle">
            </div>
        </footer>
    </div>
    <script src="script.js" defer></script>
</body>
</html>
