<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twój Teatr Bajek AI</title>
    <meta name="description" content="Stwórz i odsłuchaj unikalną, udźwiękowioną bajkę. Zaprojektowane, by wyciszać i inspirować.">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@500&family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ZMIANA: Dodajemy "kurtynę" - ekran powitalny -->
    <div id="entry-overlay">
        <div class="entry-content">
            <svg class="entry-icon"><use xlink:href="#icon-sparkle"></use></svg>
            <h1>Witaj w Teatrze Bajek</h1>
            <p>Miejsce, gdzie rodzą się opowieści.</p>
            <button id="enterBtn">Rozpocznij przygodę</button>
        </div>
    </div>

    <svg width="0" height="0" style="position:absolute">
        <defs>
            <symbol id="icon-sparkle" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 2.5l1.55 3.55L17.5 7.5l-3.55 1.55L12 12.5l-1.55-3.45L7 7.5l3.45-1.45L12 2.5zM6 10l-2 4.5l-4.5-2l4.5-2L6 6l2 4.5L12.5 10l-4.5 2zM18 14l-2-4.5l4.5 2l-4.5 2L18 18l-2-4.5l4.5-2z"/>
            </symbol>
            <symbol id="icon-volume-high" viewBox="0 0 24 24">
                <path fill="currentColor" d="M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM3 9v6h4l5 5V4L7 9H3z"/>
            </symbol>
            <symbol id="icon-music" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 3v10.55c-.59-.34-1.27-.55-2-.55c-2.21 0-4 1.79-4 4s1.79 4 4 4s4-1.79 4-4V7h4V3h-6z"/>
            </symbol>
        </defs>
    </svg>

    <audio id="backgroundMusicPlayer" loop>
        <source src="https://cdn.pixabay.com/audio/2022/02/08/audio_341d3419e8.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <!-- Reszta kodu HTML pozostaje bez zmian -->
        <header>
            <h1>
                <svg class="header-icon"><use xlink:href="#icon-sparkle"></use></svg>
                <span>Twój Teatr Bajek</span>
            </h1>
            <p>Stwórz opowieść, która utuli do snu.</p>
        </header>

        <main>
            <div id="form-section">
                <div class="form-group">
                    <label for="childName">Imię Głównego Bohatera</label>
                    <input type="text" id="childName" placeholder="np. Zosia, Krzyś">
                </div>
            
                <div class="form-group">
                    <label for="animalHelper">Zwierzęcy Pomocnik</label>
                    <div class="input-with-icon">
                        <input type="text" id="animalHelper" placeholder="np. odważny lew, mądra sowa">
                        <button class="random-btn" id="randomAnimalBtn" title="Losuj" aria-label="Losuj zwierzęcego pomocnika">
                            <svg><use xlink:href="#icon-sparkle"></use></svg>
                        </button>
                    </div>
                </div>
            
                <div class="form-group">
                    <label for="magicPlace">Magiczne Miejsce</label>
                     <div class="input-with-icon">
                        <input type="text" id="magicPlace" placeholder="np. Tęczowy Las, Podwodna Kraina">
                        <button class="random-btn" id="randomPlaceBtn" title="Losuj" aria-label="Losuj magiczne miejsce">
                             <svg><use xlink:href="#icon-sparkle"></use></svg>
                        </button>
                    </div>
                </div>
            
                <div class="form-group">
                    <label for="magicItem">Magiczny Przedmiot</label>
                    <div class="input-with-icon">
                        <input type="text" id="magicItem" placeholder="np. latający dywan, znikająca czapka">
                        <button class="random-btn" id="randomItemBtn" title="Losuj" aria-label="Losuj magiczny przedmiot">
                            <svg><use xlink:href="#icon-sparkle"></use></svg>
                        </button>
                    </div>
                </div>
            </div>
        
            <button id="generateBtn">
                <span class="btn-text">Stwórz Moją Bajkę</span>
                <span class="spinner-container hidden"><div class="spinner"></div></span>
            </button>
        
            <div id="story-container" class="hidden">
                <div id="result">
                    <h2 id="storyTitle"></h2>
                    <div id="storyContent"></div>
                </div>
    
                <div id="audio-section">
                    <button id="readAloudBtn" class="audio-button">
                        <span class="btn-text">Odsłuchaj Opowieść</span>
                    </button>
                    <div id="volume-control-section">
                        <label for="voiceVolume">
                            <svg><use xlink:href="#icon-volume-high"></use></svg>
                        </label>
                        <input type="range" id="voiceVolume" class="volume-slider" min="0" max="1" step="0.05" value="1.0">
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <p>Zaprojektowane z Miłością</p>
            <div id="music-control-group">
                <button id="toggleMusicBtn" title="Włącz/wyłącz muzykę w tle" aria-label="Włącz lub wyłącz muzykę w tle">
                    <svg><use xlink:href="#icon-music"></use></svg>
                </button>
                <input type="range" id="musicVolume" class="volume-slider" min="0" max="0.3" step="0.01" value="0.1" title="Głośność muzyki w tle">
            </div>
        </footer>
    </div>
    <script src="script.js" defer></script>
</body>
</html>
